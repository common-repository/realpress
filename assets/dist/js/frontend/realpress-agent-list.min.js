(()=>{"use strict";const e=window.wp.url,t=t=>(0,e.addQueryArgs)(document.location.origin+document.location.pathname,t),n=document.querySelector(".realpress-agent-list");let r,o,a,s,l,c,i,d;const u=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.style.opacity=.4,wp.apiFetch({path:(0,e.addQueryArgs)("/"+s+"/agents",r),method:"GET"}).then((e=>{void 0!==e.data.content?o.innerHTML=e.data.content:e.msg&&(o.innerHTML=e.msg),void 0!==e.data.pagination?n.querySelector(".realpress-agent-list-pagination").innerHTML=e.data.pagination:n.querySelector(".realpress-agent-list-pagination").innerHTML="",void 0!==e.data.from_to?n.querySelector(".realpress-agent-list-from-to").innerHTML=e.data.from_to:n.querySelector(".realpress-agent-list-from-to").innerHTML="";const t=n.querySelector(".realpress-pagination");if(t){const e=t.querySelectorAll("a");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("data-page");u({...r,offset:t}),d.scrollIntoView({behavior:"smooth"})}))}})).catch((e=>{console.log(e)})).finally((()=>{const e=t(r);window.history.pushState("","",e),o.style.opacity=1}))},p=()=>{n&&((()=>{r=n.querySelector(".realpress-sort-by select"),d=n.querySelector(".realpress-agent-list-content"),o=n.querySelector(".realpress-agent-list-container"),a=document.querySelector(".realpress-agent-search"),s=REALPRESS_GLOBAL_OBJECT.rest_namespace||"",i={offset:1,orderby:"display_name",order:"ASC"};const e=(()=>{const e=new URLSearchParams(location.search),t={};for(const[n,r]of e)t[n]=r;return t})();Object.keys(e).length&&(i={...i,...e})})(),u(i),r.addEventListener("change",(function(e){switch(e.target.value){case"name_asc":l="display_name",c="ASC";break;case"name_desc":l="display_name",c="DESC";break;default:l="ID",c="DESC"}u({...i,orderby:l,order:c}),d.scrollIntoView({behavior:"smooth"})})),a&&a.querySelector("button").addEventListener("click",(function(){const e=a.querySelectorAll("input,select");if(e){for(let t=0;t<e.length;t++){const n=e[t],r=n.getAttribute("name");""===n.value?i.hasOwnProperty(r)&&delete i[r]:i[r]=n.value}i={...i,offset:1},u(i),d.scrollIntoView({behavior:"smooth"})}})))};document.addEventListener("DOMContentLoaded",(e=>{p()}))})();