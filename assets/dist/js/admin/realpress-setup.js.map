{"version":3,"file":"admin/realpress-setup.js","mappings":"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","sources":["webpack://realpress/./assets/src/js/admin/setup/import-demo.js","webpack://realpress/./assets/src/js/admin/setup/pages.js","webpack://realpress/external window [\"wp\",\"url\"]","webpack://realpress/webpack/bootstrap","webpack://realpress/webpack/runtime/compat get default export","webpack://realpress/webpack/runtime/define property getters","webpack://realpress/webpack/runtime/hasOwnProperty shorthand","webpack://realpress/webpack/runtime/make namespace object","webpack://realpress/./assets/src/js/admin/realpress-setup.tsx"],"sourcesContent":["import { addQueryArgs } from '@wordpress/url';\n\nconst realpressImportDemo = () => {\n\tconst importDemoNode = document.querySelector( '.realpress-import-demo-content' );\n\tif ( ! importDemoNode ) {\n\t\treturn;\n\t}\n\n\tconst importBtnNode = importDemoNode.querySelector( 'button' );\n\tconst importNotifyNode = importDemoNode.querySelector( '.realpress-import-demo-notification' );\n\tconst { __ } = wp.i18n;\n\n\timportBtnNode.addEventListener( 'click', function() {\n\t\timportBtnNode.disabled = true;\n\t\timportNotifyNode.innerHTML = __( 'System is runningâ€¦', ' realpress' );\n\t\tconst restNamespace = REALPRESS_GLOBAL_OBJECT.rest_namespace || '';\n\t\twp.apiFetch( {\n\t\t\tpath: addQueryArgs( '/' + restNamespace + '/import-demo' ),\n\t\t\tmethod: 'POST',\n\t\t} ).then( ( res ) => {\n\t\t\tif ( res.msg ) {\n\t\t\t\timportNotifyNode.innerHTML = `<p>${res.msg}</p>`;\n\t\t\t}\n\t\t} ).catch( ( err ) => {\n\t\t\tconsole.log( err );\n\t\t} ).finally( () => {\n\t\t\timportBtnNode.disabled = false;\n\t\t} );\n\t} );\n};\n\nexport default realpressImportDemo;\n","const realpressSetupPages = () => {\n    const pageSettingNode = document.querySelector('.realpress-page-setting');\n    if (!pageSettingNode) {\n        return;\n    }\n\n    const createPagesButtonNode = pageSettingNode.querySelector('button#realpress-create-all-pages');\n    if (!createPagesButtonNode) {\n        return;\n    }\n\n    const {__} = wp.i18n;\n\n    const agentListPageId = REALPRESS_GLOBAL_OBJECT.agent_list_page_id || '';\n    const termsAndConditionsPageId = REALPRESS_GLOBAL_OBJECT.terms_and_conditions_page_id || '';\n    const becomeAnAgentPageId = REALPRESS_GLOBAL_OBJECT.become_an_agent_page_id || '';\n    const wishlistPageId = REALPRESS_GLOBAL_OBJECT.wishlist_page_id || '';\n\n    const agentListPageNode = pageSettingNode.querySelector('#realpress_agent_list_page');\n    const termsAndConditionsPageNode = pageSettingNode.querySelector('#realpress_terms_and_conditions_page');\n    const becomeAnAgentPageNode = pageSettingNode.querySelector('#realpress_become_an_agent_page');\n    const wishlistPageNode = pageSettingNode.querySelector('#realpress_wishlist_page');\n\n    createPagesButtonNode.addEventListener('click', async function (event) {\n        event.preventDefault();\n        createPagesButtonNode.disabled = true;\n        createPagesButtonNode.insertAdjacentHTML('afterbegin', ' <i class=\"fa fa-spinner fa-spin\"></i>' + ' ');\n        if (agentListPageNode) {\n            let agentListResult = await create_page(agentListPageId, agentListPageNode.tomselect, __('Agent List', 'realpress'));\n            addValueToSelect(agentListResult, agentListPageNode);\n        }\n\n        if (termsAndConditionsPageNode) {\n            let termsAndConditionsResult = await create_page(termsAndConditionsPageId, termsAndConditionsPageNode.tomselect, __('Terms and Conditions', 'realpress'));\n            addValueToSelect(termsAndConditionsResult, termsAndConditionsPageNode);\n        }\n\n        if (becomeAnAgentPageNode) {\n            let becomeAnAgentResult = await create_page(becomeAnAgentPageId, becomeAnAgentPageNode.tomselect, __('Become an Agent', 'realpress'));\n            addValueToSelect(becomeAnAgentResult, becomeAnAgentPageNode);\n        }\n\n        if (wishlistPageNode) {\n            let wishlisttResult = await create_page(wishlistPageId, wishlistPageNode.tomselect, __('WishList', 'realpress'));\n            addValueToSelect(wishlisttResult, wishlistPageNode);\n        }\n        createPagesButtonNode.querySelector('i.fa-spinner').remove();\n        createPagesButtonNode.disabled = false;\n    });\n};\n\n\nconst create_page = (pageId, node, title) => {\n    const restNamespace = REALPRESS_GLOBAL_OBJECT.rest_namespace || '';\n    if (pageId) {\n        node.setValue([pageId]);\n\n        return new Promise(resolve => resolve('success'));\n    } else {\n        let data = {title, post_type: 'page', post_status: 'publish'}\n        return wp.apiFetch({\n            path: '/' + restNamespace + '/page',\n            method: 'POST',\n            data,\n        })\n    }\n}\n\nconst addValueToSelect = (result, selectNode) => {\n    if (result.status && result.status === 'success' && result.data) {\n        selectNode.tomselect.addOption({value: result.data.id, text: result.data.title});\n        selectNode.tomselect.setValue([result.data.id]);\n    }\n}\n\nexport default realpressSetupPages;","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import realpressImportDemo from './setup/import-demo';\nimport realpressSetupPages from './setup/pages';\n\ndocument.addEventListener( 'DOMContentLoaded', ( event ) => {\n\trealpressImportDemo();\n\trealpressSetupPages();\n} );\n"],"names":["addQueryArgs","realpressImportDemo","importDemoNode","document","querySelector","importBtnNode","importNotifyNode","__","wp","i18n","addEventListener","disabled","innerHTML","restNamespace","REALPRESS_GLOBAL_OBJECT","rest_namespace","apiFetch","path","method","then","res","msg","catch","err","console","log","finally","realpressSetupPages","pageSettingNode","createPagesButtonNode","agentListPageId","agent_list_page_id","termsAndConditionsPageId","terms_and_conditions_page_id","becomeAnAgentPageId","become_an_agent_page_id","wishlistPageId","wishlist_page_id","agentListPageNode","termsAndConditionsPageNode","becomeAnAgentPageNode","wishlistPageNode","event","preventDefault","insertAdjacentHTML","agentListResult","create_page","tomselect","addValueToSelect","termsAndConditionsResult","becomeAnAgentResult","wishlisttResult","remove","pageId","node","title","setValue","Promise","resolve","data","post_type","post_status","result","selectNode","status","addOption","value","id","text"],"sourceRoot":""}